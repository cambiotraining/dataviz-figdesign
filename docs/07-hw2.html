<!DOCTYPE html>

<html>

<head>

<meta charset="utf-8" />
<meta name="generator" content="pandoc" />
<meta http-equiv="X-UA-Compatible" content="IE=EDGE" />




<title>Homework before session 3</title>

<script src="site_libs/header-attrs-2.22/header-attrs.js"></script>
<script src="site_libs/jquery-3.6.0/jquery-3.6.0.min.js"></script>
<meta name="viewport" content="width=device-width, initial-scale=1" />
<link href="site_libs/bootstrap-3.3.5/css/bootstrap.min.css" rel="stylesheet" />
<script src="site_libs/bootstrap-3.3.5/js/bootstrap.min.js"></script>
<script src="site_libs/bootstrap-3.3.5/shim/html5shiv.min.js"></script>
<script src="site_libs/bootstrap-3.3.5/shim/respond.min.js"></script>
<style>h1 {font-size: 34px;}
       h1.title {font-size: 38px;}
       h2 {font-size: 30px;}
       h3 {font-size: 24px;}
       h4 {font-size: 18px;}
       h5 {font-size: 16px;}
       h6 {font-size: 12px;}
       code {color: inherit; background-color: rgba(0, 0, 0, 0.04);}
       pre:not([class]) { background-color: white }</style>
<script src="site_libs/jqueryui-1.13.2/jquery-ui.min.js"></script>
<link href="site_libs/tocify-1.9.1/jquery.tocify.css" rel="stylesheet" />
<script src="site_libs/tocify-1.9.1/jquery.tocify.js"></script>
<script src="site_libs/navigation-1.1/tabsets.js"></script>

<style type="text/css">
  code{white-space: pre-wrap;}
  span.smallcaps{font-variant: small-caps;}
  span.underline{text-decoration: underline;}
  div.column{display: inline-block; vertical-align: top; width: 50%;}
  div.hanging-indent{margin-left: 1.5em; text-indent: -1.5em;}
  ul.task-list{list-style: none;}
    </style>



<style type="text/css">
  code {
    white-space: pre;
  }
  .sourceCode {
    overflow: visible;
  }
</style>
<style type="text/css" data-origin="pandoc">
pre > code.sourceCode { white-space: pre; position: relative; }
pre > code.sourceCode > span { display: inline-block; line-height: 1.25; }
pre > code.sourceCode > span:empty { height: 1.2em; }
.sourceCode { overflow: visible; }
code.sourceCode > span { color: inherit; text-decoration: inherit; }
div.sourceCode { margin: 1em 0; }
pre.sourceCode { margin: 0; }
@media screen {
div.sourceCode { overflow: auto; }
}
@media print {
pre > code.sourceCode { white-space: pre-wrap; }
pre > code.sourceCode > span { text-indent: -5em; padding-left: 5em; }
}
pre.numberSource code
  { counter-reset: source-line 0; }
pre.numberSource code > span
  { position: relative; left: -4em; counter-increment: source-line; }
pre.numberSource code > span > a:first-child::before
  { content: counter(source-line);
    position: relative; left: -1em; text-align: right; vertical-align: baseline;
    border: none; display: inline-block;
    -webkit-touch-callout: none; -webkit-user-select: none;
    -khtml-user-select: none; -moz-user-select: none;
    -ms-user-select: none; user-select: none;
    padding: 0 4px; width: 4em;
    color: #aaaaaa;
  }
pre.numberSource { margin-left: 3em; border-left: 1px solid #aaaaaa;  padding-left: 4px; }
div.sourceCode
  {   }
@media screen {
pre > code.sourceCode > span > a:first-child::before { text-decoration: underline; }
}
code span.al { color: #ff0000; font-weight: bold; } /* Alert */
code span.an { color: #60a0b0; font-weight: bold; font-style: italic; } /* Annotation */
code span.at { color: #7d9029; } /* Attribute */
code span.bn { color: #40a070; } /* BaseN */
code span.bu { color: #008000; } /* BuiltIn */
code span.cf { color: #007020; font-weight: bold; } /* ControlFlow */
code span.ch { color: #4070a0; } /* Char */
code span.cn { color: #880000; } /* Constant */
code span.co { color: #60a0b0; font-style: italic; } /* Comment */
code span.cv { color: #60a0b0; font-weight: bold; font-style: italic; } /* CommentVar */
code span.do { color: #ba2121; font-style: italic; } /* Documentation */
code span.dt { color: #902000; } /* DataType */
code span.dv { color: #40a070; } /* DecVal */
code span.er { color: #ff0000; font-weight: bold; } /* Error */
code span.ex { } /* Extension */
code span.fl { color: #40a070; } /* Float */
code span.fu { color: #06287e; } /* Function */
code span.im { color: #008000; font-weight: bold; } /* Import */
code span.in { color: #60a0b0; font-weight: bold; font-style: italic; } /* Information */
code span.kw { color: #007020; font-weight: bold; } /* Keyword */
code span.op { color: #666666; } /* Operator */
code span.ot { color: #007020; } /* Other */
code span.pp { color: #bc7a00; } /* Preprocessor */
code span.sc { color: #4070a0; } /* SpecialChar */
code span.ss { color: #bb6688; } /* SpecialString */
code span.st { color: #4070a0; } /* String */
code span.va { color: #19177c; } /* Variable */
code span.vs { color: #4070a0; } /* VerbatimString */
code span.wa { color: #60a0b0; font-weight: bold; font-style: italic; } /* Warning */

</style>
<script>
// apply pandoc div.sourceCode style to pre.sourceCode instead
(function() {
  var sheets = document.styleSheets;
  for (var i = 0; i < sheets.length; i++) {
    if (sheets[i].ownerNode.dataset["origin"] !== "pandoc") continue;
    try { var rules = sheets[i].cssRules; } catch (e) { continue; }
    var j = 0;
    while (j < rules.length) {
      var rule = rules[j];
      // check if there is a div.sourceCode rule
      if (rule.type !== rule.STYLE_RULE || rule.selectorText !== "div.sourceCode") {
        j++;
        continue;
      }
      var style = rule.style.cssText;
      // check if color or background-color is set
      if (rule.style.color === '' && rule.style.backgroundColor === '') {
        j++;
        continue;
      }
      // replace div.sourceCode by a pre.sourceCode rule
      sheets[i].deleteRule(j);
      sheets[i].insertRule('pre.sourceCode{' + style + '}', j);
    }
  }
})();
</script>




<link rel="stylesheet" href="assets/styles.css" type="text/css" />



<style type = "text/css">
.main-container {
  max-width: 940px;
  margin-left: auto;
  margin-right: auto;
}
img {
  max-width:100%;
}
.tabbed-pane {
  padding-top: 12px;
}
.html-widget {
  margin-bottom: 20px;
}
button.code-folding-btn:focus {
  outline: none;
}
summary {
  display: list-item;
}
details > summary > p:only-child {
  display: inline;
}
pre code {
  padding: 0;
}
</style>


<style type="text/css">
.dropdown-submenu {
  position: relative;
}
.dropdown-submenu>.dropdown-menu {
  top: 0;
  left: 100%;
  margin-top: -6px;
  margin-left: -1px;
  border-radius: 0 6px 6px 6px;
}
.dropdown-submenu:hover>.dropdown-menu {
  display: block;
}
.dropdown-submenu>a:after {
  display: block;
  content: " ";
  float: right;
  width: 0;
  height: 0;
  border-color: transparent;
  border-style: solid;
  border-width: 5px 0 5px 5px;
  border-left-color: #cccccc;
  margin-top: 5px;
  margin-right: -10px;
}
.dropdown-submenu:hover>a:after {
  border-left-color: #adb5bd;
}
.dropdown-submenu.pull-left {
  float: none;
}
.dropdown-submenu.pull-left>.dropdown-menu {
  left: -100%;
  margin-left: 10px;
  border-radius: 6px 0 6px 6px;
}
</style>

<script type="text/javascript">
// manage active state of menu based on current page
$(document).ready(function () {
  // active menu anchor
  href = window.location.pathname
  href = href.substr(href.lastIndexOf('/') + 1)
  if (href === "")
    href = "index.html";
  var menuAnchor = $('a[href="' + href + '"]');

  // mark the anchor link active (and if it's in a dropdown, also mark that active)
  var dropdown = menuAnchor.closest('li.dropdown');
  if (window.bootstrap) { // Bootstrap 4+
    menuAnchor.addClass('active');
    dropdown.find('> .dropdown-toggle').addClass('active');
  } else { // Bootstrap 3
    menuAnchor.parent().addClass('active');
    dropdown.addClass('active');
  }

  // Navbar adjustments
  var navHeight = $(".navbar").first().height() + 15;
  var style = document.createElement('style');
  var pt = "padding-top: " + navHeight + "px; ";
  var mt = "margin-top: -" + navHeight + "px; ";
  var css = "";
  // offset scroll position for anchor links (for fixed navbar)
  for (var i = 1; i <= 6; i++) {
    css += ".section h" + i + "{ " + pt + mt + "}\n";
  }
  style.innerHTML = "body {" + pt + "padding-bottom: 40px; }\n" + css;
  document.head.appendChild(style);
});
</script>

<!-- tabsets -->

<style type="text/css">
.tabset-dropdown > .nav-tabs {
  display: inline-table;
  max-height: 500px;
  min-height: 44px;
  overflow-y: auto;
  border: 1px solid #ddd;
  border-radius: 4px;
}

.tabset-dropdown > .nav-tabs > li.active:before, .tabset-dropdown > .nav-tabs.nav-tabs-open:before {
  content: "\e259";
  font-family: 'Glyphicons Halflings';
  display: inline-block;
  padding: 10px;
  border-right: 1px solid #ddd;
}

.tabset-dropdown > .nav-tabs.nav-tabs-open > li.active:before {
  content: "\e258";
  font-family: 'Glyphicons Halflings';
  border: none;
}

.tabset-dropdown > .nav-tabs > li.active {
  display: block;
}

.tabset-dropdown > .nav-tabs > li > a,
.tabset-dropdown > .nav-tabs > li > a:focus,
.tabset-dropdown > .nav-tabs > li > a:hover {
  border: none;
  display: inline-block;
  border-radius: 4px;
  background-color: transparent;
}

.tabset-dropdown > .nav-tabs.nav-tabs-open > li {
  display: block;
  float: none;
}

.tabset-dropdown > .nav-tabs > li {
  display: none;
}
</style>

<!-- code folding -->



<style type="text/css">

#TOC {
  margin: 25px 0px 20px 0px;
}
@media (max-width: 768px) {
#TOC {
  position: relative;
  width: 100%;
}
}

@media print {
.toc-content {
  /* see https://github.com/w3c/csswg-drafts/issues/4434 */
  float: right;
}
}

.toc-content {
  padding-left: 30px;
  padding-right: 40px;
}

div.main-container {
  max-width: 1200px;
}

div.tocify {
  width: 20%;
  max-width: 260px;
  max-height: 85%;
}

@media (min-width: 768px) and (max-width: 991px) {
  div.tocify {
    width: 25%;
  }
}

@media (max-width: 767px) {
  div.tocify {
    width: 100%;
    max-width: none;
  }
}

.tocify ul, .tocify li {
  line-height: 20px;
}

.tocify-subheader .tocify-item {
  font-size: 0.90em;
}

.tocify .list-group-item {
  border-radius: 0px;
}

.tocify-subheader {
  display: inline;
}
.tocify-subheader .tocify-item {
  font-size: 0.95em;
}

</style>



</head>

<body>


<div class="container-fluid main-container">


<!-- setup 3col/9col grid for toc_float and main content  -->
<div class="row">
<div class="col-xs-12 col-sm-4 col-md-3">
<div id="TOC" class="tocify">
</div>
</div>

<div class="toc-content col-xs-12 col-sm-8 col-md-9">




<div class="navbar navbar-default  navbar-fixed-top" role="navigation">
  <div class="container">
    <div class="navbar-header">
      <button type="button" class="navbar-toggle collapsed" data-toggle="collapse" data-bs-toggle="collapse" data-target="#navbar" data-bs-target="#navbar">
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
      </button>
      <a class="navbar-brand" href="index.html"><img id="logo" style="height: 25px;" src="assets/img/logo.svg" /></a>
    </div>
    <div id="navbar" class="navbar-collapse collapse">
      <ul class="nav navbar-nav">
        <li>
  <a href="index.html">Home</a>
</li>
<li>
  <a href="99-setup.html">Setup</a>
</li>
<li class="dropdown">
  <a href="#" class="dropdown-toggle" data-toggle="dropdown" role="button" data-bs-toggle="dropdown" aria-expanded="false">
    Materials
     
    <span class="caret"></span>
  </a>
  <ul class="dropdown-menu" role="menu">
    <li>
      <a href="00-getting-started.html">Getting Started</a>
    </li>
    <li>
      <a href="01-intro-to-r.html">Introduction to R</a>
    </li>
    <li>
      <a href="02-starting-with-data.html">Starting With Data</a>
    </li>
    <li>
      <a href="03-intro-ggplot2.html">Data visualisation</a>
    </li>
    <li>
      <a href="05-customising-plots.html">Customising Plots</a>
    </li>
  </ul>
</li>
<li class="dropdown">
  <a href="#" class="dropdown-toggle" data-toggle="dropdown" role="button" data-bs-toggle="dropdown" aria-expanded="false">
    Homework
     
    <span class="caret"></span>
  </a>
  <ul class="dropdown-menu" role="menu">
    <li>
      <a href="06-hw1.html">Before session 2</a>
    </li>
    <li>
      <a href="07-hw2.html">Before session 4</a>
    </li>
    <li>
      <a href="08-hw3.html">Before session 5</a>
    </li>
  </ul>
</li>
<li class="dropdown">
  <a href="#" class="dropdown-toggle" data-toggle="dropdown" role="button" data-bs-toggle="dropdown" aria-expanded="false">
    Extras
     
    <span class="caret"></span>
  </a>
  <ul class="dropdown-menu" role="menu">
    <li>
      <a href="10-cheatsheets.html">Cheatsheets</a>
    </li>
    <li>
      <a href="11-resources.html">Other Resources</a>
    </li>
  </ul>
</li>
      </ul>
      <ul class="nav navbar-nav navbar-right">
        <li>
  <a href="https://github.com/cambiotraining">GitHub</a>
</li>
      </ul>
    </div><!--/.nav-collapse -->
  </div><!--/.container -->
</div><!--/.navbar -->

<div id="header">



<h1 class="title toc-ignore">Homework before session 3</h1>

</div>


<p>For our homework exercises, we will use a new dataset from the <a
href="https://www.gapminder.org/"><em>Gapminder Foundation</em></a>,
which gives access to global data as well as many tools to help explore
it.</p>
<p>We will use data relating to socio-economic statistics for 2010. The
columns in our data file are:</p>
<table>
<colgroup>
<col width="18%" />
<col width="81%" />
</colgroup>
<thead>
<tr class="header">
<th>Column</th>
<th>Description</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td>country</td>
<td>country name</td>
</tr>
<tr class="even">
<td>world_region</td>
<td>6 world regions</td>
</tr>
<tr class="odd">
<td>year</td>
<td>year that each datapoint refers to</td>
</tr>
<tr class="even">
<td>children_per_woman</td>
<td>total fertility rate</td>
</tr>
<tr class="odd">
<td>life_expectancy</td>
<td>average number of years a newborn child would live if current
mortality patterns were to stay the same</td>
</tr>
<tr class="even">
<td>income_per_person</td>
<td>gross domestic product per person adjusted for differences in
purchasing power</td>
</tr>
<tr class="odd">
<td>is_oecd</td>
<td>Whether a country belongs to the “OECD” (<code>TRUE</code>) or not
(<code>FALSE</code>)</td>
</tr>
<tr class="even">
<td>income_groups</td>
<td>categorical classification of income groups</td>
</tr>
<tr class="odd">
<td>population</td>
<td>total number of a country’s population</td>
</tr>
<tr class="even">
<td>main_religion</td>
<td>religion of the majority of population in 2008</td>
</tr>
<tr class="odd">
<td>child_mortality</td>
<td>death of children under 5 years old per 1000 births</td>
</tr>
<tr class="even">
<td>life_expectancy_female</td>
<td>life expectancy at birth, females</td>
</tr>
<tr class="odd">
<td>life_expectancy_male</td>
<td>life expectancy at birth, males</td>
</tr>
</tbody>
</table>
<div id="task-1---setting-up-your-project" class="section level2">
<h2>Task 1 - setting up your project</h2>
<div class="note">
<p><strong>Tip:</strong> this exercise builds on the skills gained in <a
href="00-getting-started.html">Getting Started</a>.</p>
</div>
<ol style="list-style-type: decimal">
<li>On your computer, create a new directory for this project called
<code>gapminder-dataviz</code>.</li>
<li>Create directories that you feel are important, including one called
<code>data_raw</code> for saving the raw data.</li>
<li>Download the <a
href="https://github.com/tavareshugo/r-eda-gapminder/raw/gh-pages/_episodes_rmd/data/raw/gapminder2010_socioeconomic.csv">gapminder
socio-economic dataset 2010</a> and save it in your project’s data
folder. (<kbd>right-click</kbd> the file link and choose “Save link
as…”)</li>
<li>Create a new R Project on the <code>gapminder-dataviz</code>
directory you just created.</li>
</ol>
<details>
<summary>
Answer
</summary>
<p>We create a new directory as well as sub-directories, shown here
schematically:</p>
<pre><code>gapminder-dataviz
 |_ data_raw
 |_ data_processed
 |_ fig_output
 |_ scripts</code></pre>
<p>We use <code>data_raw</code> to save the data file that we download
with the link provided.</p>
<p>Finally, we create an R project on this directory:</p>
<ol style="list-style-type: decimal">
<li>Start RStudio.</li>
<li>Under the <kbd>File</kbd> menu, click on <kbd>New Project</kbd>.
Choose <kbd>Existing Directory</kbd>.</li>
<li>Hit the <kbd>Browse…</kbd> button to go to the folder named
<code>gapminder-dataviz</code> that we’ve just created.</li>
<li>Click on <kbd>Create Project</kbd>.</li>
</ol>
<p>RStudio should refresh itself and then indicate that the <em>working
directory</em> has been set to the new folder. For example, you can run
the command <code>getwd()</code> on the console to confirm that this is
the case.</p>
</details>
</div>
<div id="task-2---importing-data" class="section level2">
<h2>Task 2 - importing data</h2>
<p>As with any dataset you must first understand its content and
formatting. Understanding what data you have will help you decide what
story you can learn from the data and how best to present it</p>
<p>Create a new script to analyse these data and call it
<code>01-gapminder_exploration.R</code>. Then, populate it with code to
achieve the following:</p>
<ol style="list-style-type: decimal">
<li>Read the <code>gapminder2010_socioeconomic.csv</code> file into a
<code>data.frame</code>/<code>tibble</code> object called
<code>gapminder</code>.
<details>
<summary>
Hint
</summary>
Use the <code>read_csv()</code> function. Remember to first load the
<code>tidyverse</code> package with <code>library(tidyverse)</code>.
</details></li>
<li>Make a basic check that your data import went well. Your data frame
should have 193 rows and 13 columns.
<details>
<summary>
Hint
</summary>
Use functions such as <code>nrow()</code>, <code>ncol()</code>,
<code>summary()</code> and <code>str()</code> to check data integrity.
</details></li>
<li>What types of variables does this data have?</li>
<li>Are there any issues that you notice with these data? Note these
down.</li>
</ol>
<details>
<summary>
Answer
</summary>
<p>We can read our data as follows:</p>
<div class="sourceCode" id="cb2"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb2-1"><a href="#cb2-1" tabindex="-1"></a><span class="fu">library</span>(tidyverse)</span>
<span id="cb2-2"><a href="#cb2-2" tabindex="-1"></a></span>
<span id="cb2-3"><a href="#cb2-3" tabindex="-1"></a>gapminder <span class="ot">&lt;-</span> <span class="fu">read_csv</span>(<span class="st">&quot;data_raw/gapminder2010_socioeconomic.csv&quot;</span>)</span></code></pre></div>
<pre><code>#&gt; Rows: 193 Columns: 13
#&gt; ── Column specification ────────────────────────────────────
#&gt; Delimiter: &quot;,&quot;
#&gt; chr (5): country, world_region, income_groups, main_religion, life_expectanc...
#&gt; dbl (7): year, children_per_woman, life_expectancy, income_per_person, popul...
#&gt; lgl (1): is_oecd
#&gt; 
#&gt; ℹ Use `spec()` to retrieve the full column specification for this data.
#&gt; ℹ Specify the column types or set `show_col_types = FALSE` to quiet this message.</code></pre>
<p>To examine the contents of the data.frame we can use several
functions, for example, to get the number of rows and columns:</p>
<div class="sourceCode" id="cb4"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb4-1"><a href="#cb4-1" tabindex="-1"></a><span class="fu">ncol</span>(gapminder) <span class="co"># number of columns in the data.frame</span></span>
<span id="cb4-2"><a href="#cb4-2" tabindex="-1"></a><span class="fu">nrow</span>(gapminder) <span class="co"># number of rows in the data.frame</span></span></code></pre></div>
<p>The <code>str()</code> function gives a more comprehensive view of
the contents of the data.frame, including the number of rows and columns
as well as the type of variable each columns was imported as by R:</p>
<div class="sourceCode" id="cb5"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb5-1"><a href="#cb5-1" tabindex="-1"></a><span class="fu">str</span>(gapminder)</span></code></pre></div>
<p>The summary function is also very useful as it gives a quick overview
of the types of variables as well as average and quantiles for numeric
data:</p>
<div class="sourceCode" id="cb6"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb6-1"><a href="#cb6-1" tabindex="-1"></a><span class="fu">summary</span>(gapminder)</span></code></pre></div>
<p>The types of variables we have are:</p>
<ul>
<li>nominal (categorical variable with no order): for example
<code>country</code> and <code>world_region</code></li>
<li>ordinal (categorical variable with order): for example
<code>income_groups</code></li>
<li>binary (categorical variable with two mutually exclusive values):
<code>is_oecd</code></li>
<li>continuous (numerical variable with any values): for example
<code>income_per_person</code> or <code>life_expectancy</code></li>
<li>discrete (numerical variable with limited values only): for example
<code>year</code></li>
</ul>
<p>From the output of the summary function, we can notice a few issues
with these data:</p>
<ul>
<li>Some <code>life_expectancy_male</code> values are invalid ==
-999.</li>
<li><code>life_expectancy_female</code> was imported as a character
variable, but should be numeric.</li>
<li>Some missing data - this is almost always expected in large
datasets.</li>
</ul>
<p>If we look at the top few rows of the table:</p>
<div class="sourceCode" id="cb7"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb7-1"><a href="#cb7-1" tabindex="-1"></a><span class="fu">head</span>(gapminder)</span></code></pre></div>
<p>We can see that <code>life_expectancy_female</code> is showing the
value “-” in the 4th row of data. Probably the person recording these
data encoded missing values with the “-” symbol, but the
<code>read_csv()</code> function did not recognise this as missing data.
The default is to consider <em>empty</em> cells as missing data and so
we should correct this in the dataset to make sure <strong>all missing
values are encoded in the same way</strong>.</p>
<p>There are a few other issues in the <code>main_religion</code>
column, which were a little harder to detect. If we look at the unique
values of this column, we will notice different spellings/formats for
some of its values:</p>
<div class="sourceCode" id="cb8"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb8-1"><a href="#cb8-1" tabindex="-1"></a><span class="co"># check unique values in a column</span></span>
<span id="cb8-2"><a href="#cb8-2" tabindex="-1"></a><span class="fu">unique</span>(gapminder<span class="sc">$</span>main_religion)</span></code></pre></div>
<p>These types of spelling mistakes are very common and it’s important
to be aware that R would consider “muslim” and “Muslim” to be different
words (due to the case-sensitivity).</p>
</details>
</div>
<div id="task-3---plotting" class="section level2">
<h2>Task 3 - plotting</h2>
<ol style="list-style-type: decimal">
<li>Create a scatter plot for life expectancy (x) against income per
person (y)</li>
<li>You will notice you get a warning message here - why do you think
this is?</li>
</ol>
<details>
<summary>
Answer
</summary>
<div class="sourceCode" id="cb9"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb9-1"><a href="#cb9-1" tabindex="-1"></a><span class="fu">ggplot</span>(<span class="at">data =</span> gapminder, </span>
<span id="cb9-2"><a href="#cb9-2" tabindex="-1"></a>       <span class="at">mapping =</span> <span class="fu">aes</span>(<span class="at">x =</span> life_expectancy, <span class="at">y =</span> income_per_person)) <span class="sc">+</span></span>
<span id="cb9-3"><a href="#cb9-3" tabindex="-1"></a>  <span class="fu">geom_point</span>()</span></code></pre></div>
<pre><code>#&gt; Warning: Removed 6 rows containing missing values (`geom_point()`).</code></pre>
<p><img src="img/R-ecology-07-unnamed-chunk-8-1.png" width="672" /></p>
<p>The warning message we get is because 6 of the rows in the data frame
do not have life_expectancy information (they are <code>NA</code>
missing data).</p>
<p>If it was a key variable for your analysis you might have wanted to
remove those individuals with missing data. In this case, we don’t mind
having these missing data, so we can carry on with our analysis.</p>
<p>Note that ‘Warning messages’ are simply that - a warning, not an
error. They are very helpful and always worth reading.</p>
</details>
</div>
<div id="task-4---data-manipulation" class="section level2">
<h2>Task 4 - data manipulation</h2>
<ol style="list-style-type: decimal">
<li>How many countries are there in “South Asia”?
<details>
<summary>
Hint
</summary>
Use the <code>filter()</code> function to subset the table to retain
only rows where <code>world_region == "south_asia"</code>.
</details></li>
<li>Create a new column in the table called <code>income_total</code>,
which is the product of population and income per person (i.e. the total
average income of the country).
<details>
<summary>
Hint
</summary>
Use the <code>mutate()</code> function to create a new column.
</details></li>
</ol>
<details>
<summary>
Answer
</summary>
<p>To identify countries in South Asia, we can use the following:</p>
<div class="sourceCode" id="cb11"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb11-1"><a href="#cb11-1" tabindex="-1"></a>gapminder <span class="sc">%&gt;%</span> </span>
<span id="cb11-2"><a href="#cb11-2" tabindex="-1"></a>  <span class="fu">filter</span>(world_region <span class="sc">==</span> <span class="st">&quot;south_asia&quot;</span>)</span></code></pre></div>
<p>From the output we can see this table has 8 rows, therefore 8
countries in this part of the world.</p>
<p>To create the new column we can use the <code>mutate()</code>
function, as such:</p>
<div class="sourceCode" id="cb12"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb12-1"><a href="#cb12-1" tabindex="-1"></a>gapminder <span class="sc">%&gt;%</span> </span>
<span id="cb12-2"><a href="#cb12-2" tabindex="-1"></a>  <span class="fu">mutate</span>(<span class="at">income_total =</span> population<span class="sc">*</span>income_per_person)</span></code></pre></div>
<p>If we wanted to save this in our table, we need to update the object,
using the <code>&lt;-</code> assignment:</p>
<div class="sourceCode" id="cb13"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb13-1"><a href="#cb13-1" tabindex="-1"></a>gapminder <span class="ot">&lt;-</span> gapminder <span class="sc">%&gt;%</span> </span>
<span id="cb13-2"><a href="#cb13-2" tabindex="-1"></a>  <span class="fu">mutate</span>(<span class="at">income_total =</span> population<span class="sc">*</span>income_per_person)</span></code></pre></div>
</details>
</div>



</div>
</div>

</div>

<script>

// add bootstrap table styles to pandoc tables
function bootstrapStylePandocTables() {
  $('tr.odd').parent('tbody').parent('table').addClass('table table-condensed');
}
$(document).ready(function () {
  bootstrapStylePandocTables();
});


</script>

<!-- tabsets -->

<script>
$(document).ready(function () {
  window.buildTabsets("TOC");
});

$(document).ready(function () {
  $('.tabset-dropdown > .nav-tabs > li').click(function () {
    $(this).parent().toggleClass('nav-tabs-open');
  });
});
</script>

<!-- code folding -->

<script>
$(document).ready(function ()  {

    // temporarily add toc-ignore selector to headers for the consistency with Pandoc
    $('.unlisted.unnumbered').addClass('toc-ignore')

    // move toc-ignore selectors from section div to header
    $('div.section.toc-ignore')
        .removeClass('toc-ignore')
        .children('h1,h2,h3,h4,h5').addClass('toc-ignore');

    // establish options
    var options = {
      selectors: "h1,h2,h3",
      theme: "bootstrap3",
      context: '.toc-content',
      hashGenerator: function (text) {
        return text.replace(/[.\\/?&!#<>]/g, '').replace(/\s/g, '_');
      },
      ignoreSelector: ".toc-ignore",
      scrollTo: 0
    };
    options.showAndHide = false;
    options.smoothScroll = true;

    // tocify
    var toc = $("#TOC").tocify(options).data("toc-tocify");
});
</script>

<!-- dynamically load mathjax for compatibility with self-contained -->
<script>
  (function () {
    var script = document.createElement("script");
    script.type = "text/javascript";
    script.src  = "https://mathjax.rstudio.com/latest/MathJax.js?config=TeX-AMS-MML_HTMLorMML";
    document.getElementsByTagName("head")[0].appendChild(script);
  })();
</script>

</body>
</html>
